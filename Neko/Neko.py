import thumby
import random
import time

random.seed( time.ticks_cpu() )

# 32x32 for 32 frames
spriteFrames = bytearray([
    0,   0,   0,   0,   0,   0,   0,   0, 192, 186, 138, 134, 130,  58,   1,   1,   1,   1,  58, 130, 134, 138, 186, 192,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0, 224,  48,  49, 254,  60,  20,  20,  18,   0,   0,   0,   2,  20,  20,  20,  60, 254,  49,  16, 224,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   3,  60,  65, 128, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128, 128,  65,  60,   3,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   1,  31,  32,  32,  31,   1,   1,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0, 252,   2, 198, 190, 142, 134, 130,  58,   1,   1,   1,   1,  58, 130, 134, 142, 190, 198,   2, 252,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   3,  60, 193,   6, 140, 148,  20,  18,   0,   0,   0,   2,  20,  20, 148, 140,   6, 193,  60,   3,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0, 252,   3,   1,   0,   0,   0,   0, 126,   1,   1, 126,   0,   0,   0,   0,   1,   3, 252,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   1,  30,  32,  32,  16,   8,   4,   3,   1,   1,   3,   4,   8,  16,  32,  32,  30,   1,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255,   1,   1,   2,   6, 126,   6,   6,  10,  18,  42,  10,  12,  24, 240,  32,  16,  16,   0,
    0,   0, 128,  64,  48,   8,   4,   2,   2,   2,   1,   1,   1,   1,   1,   2,   0,   0,   0,   0,   0,   0,   0, 240,   8,   8,   6,   1,   0,   0,   0,   0,
    0, 192, 127,  24, 128, 192, 128, 128, 192, 192,   0,   0,   0,   0,   0, 128, 193, 225,  62, 196,  64,  48,  15,   1,   0,   0,   0,   0,   0,   0,   0,   0,
    3,   4,   4,   3,   1,   0,   3,   3,   3,   3,   2,   6,   4,   4,  13,   9,   9,  11,  11,  15,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  48, 208,  16,  16,  16,   8, 236,  36,  76,  76, 196,  20,  20,  20,   8, 240,  32,  64,  64,   0,   0,   0,
    0,   0,   0,   0, 112, 144,  16,  96, 160,  16,   8,   4,   3,  12,  16,  32,   3,  32,   0,  32,   0,   0,   8, 136, 142,  71,  34,  51,  25,  13,   7,   0,
  128, 120,   4,   4,   3, 129, 134, 128, 193,  34,  16,   0,   0,   0,   0,   0,   0,   0, 128, 120,   4,   2,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   31,  16,   8,   6,   1,   0,   0,   0, 127, 128, 128, 120,   4,   4,   4,   4,   4,   2,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0, 192,  32,  32,  16,  16,   8,   8,   8,  16,  16,  32,  32,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  128,  96,  16, 136,  68,  34, 153, 112,   0,   0,   0,   0,   0,   0,   0,   8,  48, 192,   0,   0,   0,  19,  12,   8,   8,   4,   4, 130,  57,  71, 128,   0,
    3,   2,   1,   0,   0,   1, 194, 252, 240, 192,   0,  48, 208,  80,  88,  40,  22,   9, 128, 128, 196, 194,  98,  38,  68,  68,  64,  67,  64,  32,  23,  12,
    0,   0,   0,   0,   0,   0,   1,   1,   0,   0,   3,   6,   7,   1,   1,   1,   7,   7,   7,   3,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   56,  72, 136,  48,  32,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128,  64,  32,  16, 248,   0,   0,   0,   0,   0,
    0,   0,   0, 241,  14,   0,   0,   1,   2,   2,   4,   4,   4,   8,   8,  16,  32,  48,  12,   6,   1,   1,  64,  64,  64,  64,  29,   1,   2,  28, 224,   0,
  248, 136, 198, 225, 224,  96,  96, 112, 112,  48,  40, 104,  68,  64,  64,  64,  64,  64, 192, 224, 224, 192, 128, 140,  28,  50,  98, 194, 130,   1,   0,   0,
    0,   0,   1,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   3,   3,   1,   1,   2,   2,   3,   1,   0,   0,
    0,   0,   0,   0,  16,  40, 168, 232, 100, 100,  36,  40,   8,  24,  16,  16,  16,  16,  32,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  63, 193,   0,   0,   0,   0,   4,   8, 240,   0,   0,   0, 224,  16,   8,   7,   3, 129,  15,   8,   4, 130,   1, 127, 128,   0,   0,
    0,   0,   0,   0,   0,   0,  15,  16,  96, 128,   0,  48, 206,   1, 192,  48,   2,   3,  34, 194, 192, 192, 195, 192, 192, 224, 107,  64,  32,  31,   2,   2,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   6,  12,   9,  15,   4,   4,   6,   2,   3,   3,   7,   7,   3,   1,   0,   0,   0,   0,   0,   0,   0,   0,
    0,  32,  80,  80,  80, 144,  16,  32,  64, 144, 168, 168, 104,   8, 136,  72,  56, 144, 208,  32,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  31,  32,  64, 128,   0,   0,   1,   1,   1,   0,   0,   1, 128, 192,  97,  54,  28,   8,  76, 252, 112,  96,  48,  16, 152, 248,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   2,  12,  48,  64, 128,  34,  73, 136, 136,  16,   0,   0,  56,   0,   0, 128,  56, 128, 255,  16,   8,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   2,  12,  16,  33,  33,  63,   3,   2,   6,  30,  63,  63,  28,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128,  64,  64,  64, 126,   1,   1, 126,  64,  64,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0, 224,  28,   2,   1, 192,  48,   8,  16,  96, 128,   0, 128,  96,  16,   8,  48, 193,   2,   4,  24, 224,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0, 116,  79, 232,  48, 127, 128,   0,   0, 112,   0,   1, 129,   1,   0, 112,   0,   0, 128, 127,  48, 232,  79, 116,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   3,   3,   2,   2,   6,   4,   4,   4,   6,   2,   2,   3,   3,   1,   1,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0, 240,  14,   1,   3,  14,  48,  62,   1,   1,  62,  32,  16,  14,   3,   1,  14, 240,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0, 243,  12, 192,  48,   8,  16,  96, 128,   0, 128,  96,  16,   8,  48, 192,  12, 243,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   4,   4,   8,  63, 255, 128,   0,   0, 112,   0,   1, 129,   1,   0, 112,   0,   0, 128, 255,  63,   8,   4,   4,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   7,  56,  65,  98,  58,   6,   4,   4,   4,   6,  58,  98,  65,  56,   7,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128,  64,  32,  16,  16,  16,  16,  24,   8,  40,  36, 100, 100, 232, 168,  40,  16,   0,   0,   0,   0,
    0,   0, 128, 127,   1, 130,   4,   8,  15, 129,   3,   7,   8,  16, 224,   0,   0,   0, 240,   8,   4,   0,   0,   0,   0, 193,  63,   0,   0,   0,   0,   0,
    2,   2,  31,  32,  64, 107, 224, 192, 192, 195, 192, 192, 194,  34,   3,   2,  48, 192,   1, 206,  48,   0, 128,  96,  16,  15,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   1,   3,   7,   7,   3,   3,   2,   6,   4,   4,  15,   9,  12,   6,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  32, 208, 144,  56,  72, 136,   8, 104, 168, 168, 144,  64,  32,  16, 144,  80,  80,  80,  32,   0,
    0, 248, 152,  16,  48,  96, 112, 252,  76,   8,  28,  54,  97, 192, 128,   1,   0,   0,   1,   1,   1,   0,   0, 128,  64,  32,  31,   0,   0,   0,   0,   0,
    8,  16, 255, 128,  56, 128,   0,   0,  56,   0,   0,  16, 136, 136,  73,  34, 128,  64,  48,  12,   2,   1,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,  28,  63,  63,  30,   6,   2,   3,  63,  33,  33,  16,  12,   2,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128,  64,  32,  32,  16,  16,   8,   8,   8,  16,  16,  32,  32, 192,   0,   0,   0,   0,   0,   0,   0,
    0, 128,  71,  57, 130,   4,   4,   8,   8,  12,  19,   0,   0,   0, 192,  48,   8,   0,   0,   0,   0,   0,   0,   0, 112, 153,  34,  68, 136,  16,  96, 128,
   12,  23,  32,  64,  67,  64,  68,  68,  38,  98, 194, 192, 128, 128,   9,  22,  40,  88,  80, 208,  48,   0, 192, 240, 252, 194,   1,   0,   0,   1,   2,   3,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   3,   7,   7,   7,   1,   1,   1,   7,   6,   3,   0,   0,   1,   1,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0, 248,  16,  32,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128,  64,  32,  16, 136,  72,  56,
    0, 224,  28,   2,   1,  29,  64,  64,  64,  64,   1,   1,   6,  12,  48,  32,  16,   8,   8,   4,   4,   4,   2,   2,   1,   0,   0,  14, 241,   0,   0,   0,
    0,   0,   1, 130, 194,  98,  50,  28, 140, 132, 196, 224, 224, 192,  64,  64,  64,  64,  64,  36,  40,  40,  48, 112, 112,  96,  96, 224, 225, 198, 136, 248,
    0,   0,   1,   3,   2,   2,   1,   1,   3,   3,   1,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   0,   0,
    0,  16,  16,  32, 240,  24,  12,  10,  42,  18,  10,   6,   6, 126,   6,   2,   1,   1, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   1,   6,   8,   8, 240,   0,   0,   0,   0,   0,   0,   0,   2,   1,   1,   1,   1,   1,   2,   2,   2,   4,   8,  48,  64, 128,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   1,  15,  48,  64, 196,  62, 225, 193, 128,   0,   0,   0,   0,   0, 192, 192, 128, 128, 192, 128,  24, 127, 192,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  15,  11,  11,   9,   9,  13,   4,   4,   6,   2,   3,   3,   3,   3,   0,   1,   3,   4,   4,   3,
    0,   0,   0,  64,  64,  32, 240,   8,  20,  20,  20, 196,  76,  76,  36, 236,   8,  16,  16,  16, 208,  48,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   7,  13,  25,  51,  34,  71, 142, 136,   8,   0,   0,  32,   0,  32,   3,  32,  16,  12,   3,   4,   8,  16, 160,  96,  16, 144, 112,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   2,   4, 120, 128,   0,   0,   0,   0,   0,   0,   0,  16,  34, 193, 128, 134, 129,   3,   4,   4, 120, 128,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   1,   2,   4,   4,   4,   4,   4, 120, 128, 128, 127,   0,   0,   0,   1,   6,   8,  16,  31,
    0,   0,   0,   0,   0,   0,   0,   0, 254, 193,  41,  30,   8, 239,   4,   4,   4,   7, 232,  15,  24,  63, 228,   4,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   6,  59, 234,  90,  82,  82,   8,   0,   0,   0,   8,  16,  82,  82,  74, 250,  39,   2,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,  96, 144,  48,  32,  62,  97,  64,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  64,  97,  62,  32,  16, 144,  96,   0,   0,   0,
    0,   0,   0,   0,   0,   1,   1,   1,   2,   2,   2,   1,   1,   1,   7,   8,  16,  35,  37,  25,   1,   2,   2,   2,   1,   1,   1,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   4, 196, 255,  40,  31,   8, 239,   4,   4,   4,   7, 232,  14,  25,  41, 206, 248,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   6,  63, 234,  90,  82,  82,   8,   0,   0,   0,   8,  16,  82,  82,  74, 250,  39,   2,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,  96, 144,  48,  32,  62,  97,  64,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  64,  97,  62,  32,  16, 144,  96,   0,   0,   0,
    0,   0,   0,   0,   0,   1,   1,   1,   2,   2,   2,   1,  25,  37,  35,  16,   8,   7,   1,   1,   1,   2,   2,   2,   1,   1,   1,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 192,  32,  16,  16,   8,   4,   2,   1,  15, 144,  16,  32, 240, 248, 248,
    0,   0,   0,   0,   0,   0,   0, 128,  64,  32,  16,  16,   8,   8,   8,   8,  72,  71, 136,   0,   0,   0,   0,   0,   8, 136, 199, 196,  98,  35,  17,  63,
  128,  64,  32,  16, 136, 204,  67, 128,   0,   0,   0,   0,   0,   0,  64, 192, 128, 128, 192, 225, 254, 184, 136,  12,   4,   3,   0,   0,   0,   0,   0,   0,
    0,   1,   1,   1,   0,   0,   0,   0,   1,   1,   1,   6,   4,   4,   4,   4,   5,   4,   4,   4,   7,   7,   7,   3,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 192,  32,  16,  16,   8,   4,   2,   1,  31, 160,  32,  64, 128,   0, 240,
    0,   0,   0,   0,   0,   0,   0, 128,  64,  32,  16,  16,   8,   8,   8,   8,  72,  71, 136,   0,   0,   0,   0,  36,  36,  40, 107,  64, 160, 153, 134, 255,
   15,  17,  34,  68,  72,  76,  67, 128,   0,   0,   0,   0,   0,   0,  64, 192, 128, 128, 192, 225, 254, 184, 136,  12,   4,   6,   6,   6,  14,  14,   7,   1,
    0,   0,   0,   0,   0,   0,   0,   0,   1,   1,   1,   6,   4,   4,   4,   4,   5,   4,   4,   4,   7,   7,   7,   3,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128,  72,  76,  82,  98,   4,   8, 112,  64,  64,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0, 128,  64,  64,  32,  60,  66,   1, 192,  48,   8,  16,  96, 128,   0, 128,  96,  16,   8,  48, 193,   2,  68,  56,  32,  64,  64, 128,   0,   0,
    0,   0,   0,   1,   1,   1,   1,   1,   1, 255, 192,   0,   0, 112,   0,   1, 129,   1,   0, 112,   0,   0, 128, 127,   1,   1,   1,   1,   1,   1,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,  31,  96,  17, 126,   2, 126,   4,   4,   4, 126,   2, 126,   1,  63,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 128,  64,  64,  64, 112,   8,   4,  98,  82,  76,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0, 128,  64,  64,  32,  56,  68,   2, 193,  48,   8,  16,  96, 128,   0, 128,  96,  16,   8,  48, 192,   1,  66,  60,  32,  64,  64, 128,   0,   0,   0,
    0,   0,   1,   1,   1,   1,   1,   1, 127, 128,   0,   0, 112,   0,   1, 129,   1,   0, 112,   0,   0, 192, 255,   1,   1,   1,   1,   1,   1,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,  63,   1, 126,   2, 126,   4,   4,   4, 126,   2, 126,  17,  96,  31,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  248, 248, 240,  32,  16, 144,  15,   1,   2,   4,   8,  16,  16,  32, 192,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
   63,  17,  35,  98, 196, 199, 136,   8,   0,   0,   0,   0,   0, 136,  71,  72,   8,   8,   8,   8,  16,  16,  32,  64, 128,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   3,   4,  12, 136, 184, 254, 225, 192, 128, 128, 192,  64,   0,   0,   0,   0,   0,   0, 128,  67, 204, 136,  16,  32,  64, 128,
    0,   0,   0,   0,   0,   0,   0,   0,   3,   7,   7,   7,   4,   4,   4,   4,   4,   4,   4,   4,   6,   1,   1,   1,   0,   0,   0,   0,   1,   1,   1,   0,
  240,   0, 128,  64,  32, 160,  31,   1,   2,   4,   8,  16,  16,  32, 192,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
  255, 134, 153, 160,  64, 107,  40,  36,  36,   0,   0,   0,   0, 136,  71,  72,   8,   8,   8,   8,  16,  16,  32,  64, 128,   0,   0,   0,   0,   0,   0,   0,
    1,   6,  14,  14,   6,   6,   6,   4,  12, 136, 184, 254, 225, 192, 128, 128, 192,  64,   0,   0,   0,   0,   0,   0, 128,  67,  76,  72,  68,  34,  17,  15,
    0,   0,   0,   0,   0,   0,   0,   0,   3,   7,   7,   7,   4,   4,   4,   5,   4,   4,   4,   4,   6,   1,   1,   1,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 192,  48,   8,  16,  96, 128,   0, 128,  96,  16,   8,  48, 192,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 127, 128,  64,  64,  92,   0,   1,  65,   1,   0,  92,  64,  64, 128, 127,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0, 128,  64,  64, 128, 225,  18,  10,   6,   0, 128,   0,   6,  10,  18, 225, 128,  64,  64, 128,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  24,  31,  20,  20,  16,  16,  17,  31,  16,  16,  24,  15,  24,  16,  16,  31,  17,  16,  16,  20,  20,  31,  28,  20,  20,  20,   8,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 192,  48,   8,  16,  96, 128,   0, 128,  96,  16,   8,  48, 192,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 127, 144,  18,  10,   2, 244,   9,  13, 241,   4,   2,  10,  18, 144, 127,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0, 128,  64,  64, 128, 225,  18,  10,   6,   1, 129,   0,   6,  10,  18, 225, 128,  64,  64, 128,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  24,  31,  20,  20,  16,  16,  17,  31,  16,  16,  24,  15,  24,  16,  16,  31,  17,  16,  16,  20,  20,  31,  28,  20,  20,  20,   8,
    0,   0,   0,   0,   0,   0,   0,   0,   0, 240,  16,  32,  32,  64,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   6,  26,  34, 194,   4,   4,   4,   7,   0, 192,  32,  16, 128, 128,   1,   1,   2, 252, 254,   2,  60,  32,  64, 128,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   7,  13, 141,  85,  80, 148, 240,  16,   9,   8,   0, 128,   0,   6,   9,  27, 238,   0,   0,   0,   0, 129, 254,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  24,  31,  20,  20,  16,  16,  17,  31,  16,  16,  24,  15,  24,  16,  16,  31,  25,  24,  28,  20,  22,  21,  20,  20,  20,  20,   8,
    0,   0,   0,   0, 128,  64, 128,   0,   0,   0,   0,   0, 224,  16,  32,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,  15, 240,   0,   1,   2,   4,   4,   3, 128,  64,  64,  32,   0,   1,   2, 140, 112,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   7,  13, 141,  85,  80, 148, 240,  16,  10,  14,  29, 149,  36,  36,  39,  19, 225,   1,   1,   1,   1,   2, 252,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  24,  31,  20,  20,  16,  16,  17,  31,  16,  16,  24,  15,  24,  16,  16,  31,  25,  24,  28,  20,  20,  23,  20,  20,  20,  20,   8,
    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0,  34,  34,  58,  42,  38,  34,   0, 128,  64, 128,  72, 104,  88, 200,  64,  32,  16, 224,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0, 192,  32,  24,   4,   4,   2, 122, 134,   1, 128, 128, 129,   3,   5,   7,   1,   0,   0, 128,  67,   5, 250,  60, 224,   0,   0,   0,
    0,   0,   0,   0,   0,   7,   8,  16,  16,  16,  16,  16,  51,  36,  40,  40,  40,  41,  41,  58,  24,  28,  57,  36,  36,  58,  45,  38,  49,  31,   0,   0,
    0,   0,   0,   0,   0,   8,   8, 168,  72, 168,  24,   8,   0,   0,   0, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   2,   3,   2,   2,   2,   2,   2, 128,  64, 128,   4,   4,   6,   5, 196,  32,  16,  96, 128,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0, 192,  32,  24,   4,   4,   2, 126, 129,   0,  64,  65,  67,  69, 135,   1,   0,  64,  32, 145,  67,   5, 250,  60, 224,   0,   0,   0,
    0,   0,   0,   0,   0,   7,   8,  16,  16,  16,  16,  16,  51,  36,  40,  42,  42,  42,  40,  56,  24,  26,  56,  36,  36,  58,  45,  38,  49,  31,   0,   0,
    0,   0,   0,   0,   0, 192,  64,  64, 128, 128, 128,   0, 252, 132,   8,   8,  16,  32,  64,  64, 128,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   1,  30,  96, 128,   0,   0, 145, 161, 128,   0,   0,  34, 132,  64,  80,  72, 193,  62,   0,   0,   0,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,   0,   0, 128,  64,  65, 130, 226,  18,  10,   6,   0, 128, 136,  79,   2,  34, 226, 159,  64,  64, 128,   0,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  24,  31,  20,  20,  16,  16,  17,  31,  16,  16,  24,  15,  24,  20,  16,  16,  16,  16,  16,  20,  20,  31,  26,  10,  10,   4,   0,
    0,  64,  64, 128, 128,   4,   8,  16,  32,   0, 192,  48,   8,  16,  96, 128,   0, 128,  96,  16,   8,  48, 192,   0,  16,   8,   4, 128, 128,  64,  64,   0,
    8,   8,   8,   8,   0,   1,   1,   0,   0, 127, 128,  64,  64,  92,   0,   1,  65,   1,   0,  92,  64,  64, 128, 127,   0,   1,   1,   8,   8,   8,   8,   0,
    0,   0,   0,   0,   0,   0,   0, 128,  64,  64, 128, 225,  18,  10,   6,   0, 128,   0,   6,  10,  18, 225, 144,  72, 100, 146,  12,   0,   0,   0,   0,   0,
    0,   0,   0,   0,   0,  24,  31,  20,  20,  16,  16,  17,  31,  16,  16,  24,  15,  24,  16,  16,  31,  17,  16,  16,  20,  20,  31,  24,   0,   0,   0,   0
])
sprite = thumby.Sprite( 32, 32, spriteFrames )

RUNNING_N    = "runningN"
RUNNING_N_E  = "runningNE"
RUNNING_E    = "runningE"
RUNNING_S_E  = "runningSE"
RUNNING_S    = "runningS"
RUNNING_S_W  = "runningSW"
RUNNING_W    = "runningW"
RUNNING_N_W  = "runningNW"
SITTING      = "sitting"
SCRATCHING_N = "scratchingN"
SCRATCHING_E = "scratchingE"
SCRATCHING_S = "scratchingS"
SCRATCHING_W = "scratchingW"
SCRATCHING   = "scratching"
LICKING      = "licking"
YAWNING      = "yawning"
SLEEPING     = "sleeping"
WAKING       = "waking"

cycles = {
    RUNNING_N    : (  1,  2                                         ),
    RUNNING_N_E  : (  3,  4                                         ),
    RUNNING_E    : (  5,  6                                         ),
    RUNNING_S_E  : (  7,  8                                         ),
    RUNNING_S    : (  9, 10                                         ),
    RUNNING_S_W  : ( 11, 12                                         ),
    RUNNING_W    : ( 13, 14                                         ),
    RUNNING_N_W  : ( 15, 16                                         ),
    SITTING      : ( 25, 25, 25, 25, 25, 25                         ),
    SCRATCHING_N : ( 17, 18, 17, 18, 17, 18, 17, 18, 17, 18, 17, 18 ),
    SCRATCHING_E : ( 19, 20, 19, 20, 19, 20, 19, 20, 19, 20, 19, 20 ),
    SCRATCHING_S : ( 21, 22, 21, 22, 21, 22, 21, 22, 21, 22, 21, 22 ),
    SCRATCHING_W : ( 23, 24, 23, 24, 23, 24, 23, 24, 23, 24, 23, 24 ),
    SCRATCHING   : ( 27, 28, 27, 28, 27, 28, 27, 28, 27, 28, 27, 28 ),
    LICKING      : ( 31, 31, 25, 31, 31, 25, 31, 31, 25, 31, 31, 25 ),
    YAWNING      : ( 26, 26, 26                                     ),
    SLEEPING     : ( 29, 29, 29, 30, 30, 30                         ),
    WAKING       : ( 32, 32                                         )
}
offset = 0
cycle = RUNNING_E
x = -64
y = thumby.display.height - 32
yStep = 8
xStep = 8
skittish = False
count = 195

def possRunning():
    choices = []
    if y > 0                                                            : choices.append( RUNNING_N   )
    if y > 0                          and x < thumby.display.width  - 32: choices.append( RUNNING_N_E )
    if x < thumby.display.width  - 32                                   : choices.append( RUNNING_E   )
    if x < thumby.display.width  - 32 and y < thumby.display.height - 32: choices.append( RUNNING_S_E )
    if y < thumby.display.height - 32                                   : choices.append( RUNNING_S   )
    if y < thumby.display.height - 32 and x > 0                         : choices.append( RUNNING_S_W )
    if x > 0                                                            : choices.append( RUNNING_W   )
    if x > 0                          and y > 0                         : choices.append( RUNNING_N_W )
    return choices

def pickFrom( nextCycle ):
    if nextCycle:
        choices = [ nextCycle ] * 10 + possRunning()
    else:
        choices = possRunning()
    result = random.choice( choices )
    #print( 'from', choices, 'chose', result )
    return result

def maybe( pressCycle, nextCycle ):
    if thumby.inputJustPressed():
        return pressCycle
    choices = [ nextCycle ] * 21  + [ pressCycle ]
    result = random.choice( choices )
    #print( 'from', choices, 'chose', result )
    return result

def either( a, b ):
    return random.choice( ( a, b ) )

def scratchDir():
    if x == 0:                         return SCRATCHING_W
    if x == thumby.display.width - 32: return SCRATCHING_E
    if y == 0:                         return SCRATCHING_N
    return                                    SCRATCHING_S

def run():
    global x, y
    if cycle == RUNNING_N:
        y -= yStep
    elif cycle == RUNNING_N_E:
        y -= yStep
        x += xStep
    elif cycle == RUNNING_E:
        x += xStep
    elif cycle == RUNNING_S_E:
        y += yStep
        x += xStep
    elif cycle == RUNNING_S:
        y += yStep
    elif cycle == RUNNING_S_W:
        y += yStep
        x -= xStep
    elif cycle == RUNNING_W:
        x -= xStep
    elif cycle == RUNNING_N_W:
        y -= yStep
        x -= xStep

def updateState():
    global offset, cycle, x, y, count, skittish
    offset += 1
    if offset >= len( thisCycle ):
        offset = 0
    if cycle.startswith( 'running' ):
        if ( cycle not in ( RUNNING_E, RUNNING_W ) and offset == 0 ) or ( cycle == RUNNING_E and x == thumby.display.width - 32 ) or ( cycle == RUNNING_W and x == 0 ):
            # Finished running
            if skittish:
                cycle = pickFrom( None )
            else:
                cycle = scratchDir()
        else:
            run()
    elif offset == 0: # Finished animation cycle
        if cycle in ( SCRATCHING_N, SCRATCHING_E, SCRATCHING_S, SCRATCHING_W ):
            cycle = pickFrom( None if skittish else SITTING )
        elif cycle == SITTING:
            cycle = either( SCRATCHING, LICKING )
        elif cycle == SCRATCHING or cycle == LICKING:
            cycle = pickFrom( None if skittish else YAWNING )
        elif cycle == YAWNING:
            cycle = SLEEPING
            thumby.inputJustPressed()
        elif cycle == SLEEPING:
            cycle = WAKING if skittish else maybe( WAKING, SLEEPING )
        elif cycle == WAKING:
            cycle = pickFrom( None )
    count += 1
    if count >= 360:
        count = 0
    skittish = count > 315
    #print( 'count', count, 'skittish', skittish )

thumby.display.setFPS( 4 )
while(True):
    thumby.display.fill( 0 )
    sprite.x = x
    sprite.y = y
    thisCycle = cycles[ cycle ]
    sprite.setFrame( thisCycle[ offset ] - 1 )
    thumby.display.drawSprite( sprite )
    thumby.display.update()
    updateState()
    #print( 'next cycle', cycle )
